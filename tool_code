print(write_file_tool(file_path='src/pages/Landing.tsx', content='import { motion } from \"framer-motion\";\nimport { Shield, Scan, Lock, Zap, CheckCircle, AlertTriangle, Smartphone, Factory, ShieldCheck, FileText, Database, QrCode, BarChart3 } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { useNavigate } from \"react-router\";\nimport { useAuth } from \"@/hooks/use-auth\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogTrigger } from \"@/components/ui/dialog\";\nimport { useState, lazy, Suspense } from \"react\";\nimport { toast } from \"sonner\";\nimport { AnimatedBackground } from \"@/components/AnimatedBackground\";\n\nconst QRScanner = lazy(() => import(\"@/components/QRScanner\"));\n\nexport default function Landing() {\n  const navigate = useNavigate();\n  const { isAuthenticated, isLoading, user } = useAuth();\n  const [isScanOpen, setIsScanOpen] = useState(false);\n\n  const handleGetStarted = () => {\n    if (isAuthenticated) {\n      if (user?.role === \"manufacturer\") {\n        navigate(\"/manufacturer\");\n      } else {\n        navigate(\"/app\");\n      }\n    } else {\n      navigate(\"/auth?redirect=/app\");\n    }\n  };\n\n  const handleScanSuccess = (decodedText: string) => {\n    // Validate QR Code\n    const isValidUrl = decodedText.includes(\"/verify?\");\n    let isValidJson = false;\n    try {\n      const parsed = JSON.parse(decodedText);\n      if (parsed.id || parsed.batch || parsed.contract) isValidJson = true;\n    } catch (e) {\n      // Not JSON\n    }\n\n    if (!isValidUrl && !isValidJson) {\n      toast.error(\"Invalid QR Code. Please scan a valid Dhanvantari medicine QR code.\");\n      return;\n    }\n\n    setIsScanOpen(false);\n    if (decodedText.includes(\"/verify?\")) {\n      window.location.href = decodedText;\n    } else {\n      // If it\'s not a URL, maybe redirect to app with the code?\n      // For now, just redirect to app\n      navigate(\"/app\");\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen text-white overflow-hidden relative\">\n      <AnimatedBackground />\n      \n      {/* Navbar */}\n      <nav className=\"relative z-10 border-b border-cyan-500/20 bg-slate-950/50 backdrop-blur-xl\">\n        <div className=\"w-full px-4 sm:px-6 lg:px-8\">\n          <div className=\"flex justify-between items-center h-[76px] md:h-[106px] transition-all duration-300\">\n            <motion.div\n              initial={{ opacity: 0, x: -20 }}\n              animate={{ opacity: 1, x: 0 }}\n              className=\"flex items-center gap-2 md:gap-4 cursor-pointer\"\n              onClick={() => navigate(\"/\")}\n            >\n              <div className=\"relative\">\n                <div className=\"absolute inset-0 blur-xl bg-cyan-400/20 rounded-full\" />\n                <img \n                  src=\"https://harmless-tapir-303.convex.cloud/api/storage/c2ad483d-7d84-4cc6-8685-8946c6d6c394\" \n                  alt=\"Dhanvantari Logo\" \n                  className=\"relative h-[46px] w-[46px] md:h-[76px] md:w-[76px] object-contain rounded-full p-1 transition-all duration-300\" \n                />\n              </div>\n              <span className=\"text-[28px] md:text-[46px] font-bold bg-gradient-to-r from-cyan-400 to-purple-400 bg-clip-text text-transparent tracking-wide transition-all duration-300\">\n                Dhanvantari\n              </span>\n            </motion.div>\n            \n            <motion.div\n              initial={{ opacity: 0, x: 20 }}\n              animate={{ opacity: 1, x: 0 }}\n              className=\"flex items-center gap-2 md:gap-3\"\n            >\n              {isLoading ? (\n                <Button\n                  disabled\n                  className=\"bg-gradient-to-r from-cyan-500 to-purple-500 text-white border-0 opacity-70\"\n                >\n                  Loading...\n                </Button>\n              ) : isAuthenticated ? (\n                <Button\n                  onClick={handleGetStarted}\n                  className=\"bg-gradient-to-r from-cyan-500 to-purple-500 hover:from-cyan-600 hover:to-purple-600 text-white border-0 shadow-[0_0_20px_rgba(34,211,238,0.3)] hover:shadow-[0_0_30px_rgba(34,211,238,0.5)] transition-all duration-300\"\n                >\n                  {user?.role === \"manufacturer\" ? \"Manufacturer Portal\" : \"Dashboard\"}\n                  <Zap className=\"ml-2 h-4 w-4\" />\n                </Button>\n              ) : (\n                <>\n                  <Button\n                    onClick={() => navigate(\"/auth\")}\n                    variant=\"ghost\"\n                    className=\"text-gray-300 hover:text-white hover:bg-white/10 transition-colors\"\n                  >\n                    Login\n                  </Button>\n                  <Button\n                    onClick={() => setIsScanOpen(true)}\n                    className=\"bg-gradient-to-r from-cyan-500 to-purple-500 hover:from-cyan-600 hover:to-purple-600 text-white border-0 shadow-[0_0_20px_rgba(34,211,238,0.3)] hover:shadow-[0_0_30px_rgba(34,211,238,0.5)] transition-all duration-300\"\n                  >\n                    Scan Medicine Now\n                    <Scan className=\"ml-2 h-4 w-4\" />\n                  </Button>\n                </>\n              )}\n            </motion.div>\n          </div>\n        </div>\n      </nav>\n\n      {/* Hero Section */}\n      <section className=\"relative z-10 pt-20 pb-32 px-4\">\n        <div className=\"max-w-7xl mx-auto text-center\">\n          <motion.div\n            initial={{ opacity: 0, y: 20 }}\n            animate={{ opacity: 1, y: 0 }}\n            transition={{ duration: 0.8 }}\n          >\n            <h1 className=\"text-5xl md:text-7xl font-bold mb-6 leading-tight\">\n              <span className=\"bg-gradient-to-r from-cyan-400 via-purple-400 to-pink-400 bg-clip-text text-transparent\">\n                Stop Counterfeit\n              </span>\n              <br />\n              <span className=\"text-white\">Medicines with Blockchain</span>\n            </h1>\n            \n            <p className=\"text-xl md:text-2xl text-gray-300 mb-12 max-w-3xl mx-auto\">\n              Verify medicine authenticity instantly with QR codes powered by NFT technology.\n              Protect lives, build trust.\n            </p>\n\n            <div className=\"flex flex-col sm:flex-row gap-4 justify-center items-center\">\n              <Dialog open={isScanOpen} onOpenChange={setIsScanOpen}>\n                <DialogTrigger asChild>\n                  <Button\n                    size=\"lg\"\n                    className=\"bg-gradient-to-r from-cyan-500 to-purple-500 hover:from-cyan-600 hover:to-purple-600 text-white border-0 shadow-[0_0_30px_rgba(34,211,238,0.4)] hover:shadow-[0_0_40px_rgba(34,211,238,0.6)] transition-all duration-300 text-lg px-8 py-6\"\n                  >\n                    <Scan className=\"mr-2 h-5 w-5\" />\n                    Scan Medicine Now\n                  </Button>\n                </DialogTrigger>\n                <DialogContent className=\"bg-slate-900 border-slate-800 text-white sm:max-w-xl max-h-[90vh] overflow-y-auto p-6\">\n                  <DialogHeader>\n                    <DialogTitle className=\"text-xl font-bold text-center mb-2\">Scan Medicine QR</DialogTitle>\n                  </DialogHeader>\n                  <div className=\"w-full\">\n                    <Suspense fallback={<div className=\"p-8 text-center text-gray-400\">Loading Scanner...</div>}>\n                      <QRScanner onScanSuccess={handleScanSuccess} />\n                    </Suspense>\n                  </div>\n                </DialogContent>\n              </Dialog>\n              \n              <Button\n                onClick={() => navigate(\"/manufacturer\")}\n                size=\"lg\"\n                variant=\"outline\"\n                className=\"border-2 border-cyan-400/50 text-cyan-400 hover:bg-cyan-400/10 hover:border-cyan-400 transition-all duration-300 text-lg px-8 py-6\"\n              >\n                <Lock className=\"mr-2 h-5 w-5\" />\n                Manufacturer Portal\n              </Button>\n            </div>\n          </motion.div>\n\n          {/* Stats */}\n          <motion.div\n            initial={{ opacity: 0, y: 40 }}\n            animate={{ opacity: 1, y: 0 }}\n            transition={{ delay: 0.3, duration: 0.8 }}\n            className=\"grid grid-cols-1 md:grid-cols-3 gap-8 mt-20 max-w-4xl mx-auto\"\n          >\n            {[\n              { label: \"Medicines Protected\", value: \"10K+\", icon: Shield },\n              { label: \"Scans Performed\", value: \"50K+\", icon: Scan },\n              { label: \"Counterfeits Detected\", value: \"500+\", icon: AlertTriangle },\n            ].map((stat, index) => (\n              <div\n                key={index}\n                className=\"bg-slate-900/50 backdrop-blur-xl border border-cyan-500/20 rounded-xl p-6 shadow-[0_0_20px_rgba(34,211,238,0.1)]\"\n              >\n                <stat.icon className=\"h-8 w-8 text-cyan-400 mx-auto mb-3\" />\n                <div className=\"text-3xl font-bold text-white mb-1\">{stat.value}</div>\n                <div className=\"text-gray-400\">{stat.label}</div>\n              </div>\n            ))}\n          </motion.div>\n        </div>\n      </section>\n\n      {/* How It Works Section - Split View */}\n      <section className=\"relative z-10 py-24 px-4 overflow-hidden\">\n        <div className=\"max-w-7xl mx-auto\">\n          <motion.div\n            initial={{ opacity: 0, y: 20 }}\n            whileInView={{ opacity: 1, y: 0 }}\n            viewport={{ once: true }}\n            className=\"text-center mb-20\"\n          >\n            <h2 className=\"text-4xl md:text-5xl font-bold mb-6\">\n              <span className=\"bg-gradient-to-r from-cyan-400 to-purple-400 bg-clip-text text-transparent\">\n                How It Works\n              </span>\n            </h2>\n            <p className=\"text-xl text-gray-300 max-w-2xl mx-auto\">\n              A dual-sided ecosystem ensuring trust from factory to pharmacy.\n            </p>\n          </motion.div>\n\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-8 md:gap-16 relative\">\n            {/* Center Divider (Desktop) */}\n            <div className=\"hidden md:block absolute left-1/2 top-0 bottom-0 w-px bg-gradient-to-b from-transparent via-cyan-500/50 to-transparent -translate-x-1/2\" />\n            \n            {/* Consumer Side */}\n            <motion.div\n              initial={{ opacity: 0, x: -50 }}\n              whileInView={{ opacity: 1, x: 0 }}\n              viewport={{ once: true }}\n              transition={{ duration: 0.8, ease: \"easeOut\" }}\n              className=\"relative\"\n            >\n              <div className=\"flex flex-col items-center md:items-end text-center md:text-right space-y-8\">\n                <div className=\"bg-gradient-to-br from-purple-500/20 to-blue-500/20 p-4 rounded-2xl border border-purple-500/30 mb-4\">\n                  <Smartphone className=\"w-12 h-12 text-purple-400\" />\n                </div>\n                <h3 className=\"text-3xl font-bold text-white mb-2\">For Consumers</h3>\n                <p className=\"text-gray-400 mb-8 max-w-md\">\n                  Instantly verify the authenticity of your medicines with a simple scan.\n                </p>\n                \n                <div className=\"space-y-6 w-full max-w-md\">\n                  {[\n                    { title: \"Scan QR Code\", desc: \"Use your phone camera to scan the secure QR on the package.\", icon: Scan },\n                    { title: \"Instant Verification\", desc: \"Immediate feedback on product authenticity via blockchain.\", icon: ShieldCheck },\n                    { title: \"View Details\", desc: \"See manufacturing date, expiry, and origin details.\", icon: FileText },\n                  ].map((item, i) => (\n                    <motion.div \n                      key={i}\n                      initial={{ opacity: 0, x: -20 }}\n                      whileInView={{ opacity: 1, x: 0 }}\n                      viewport={{ once: true }}\n                      transition={{ delay: 0.2 + (i * 0.1) }}\n                      className=\"bg-slate-900/50 p-4 rounded-xl border border-purple-500/10 hover:border-purple-500/40 transition-colors flex flex-row-reverse md:flex-row items-center gap-4\"\n                    >\n                      <div className=\"flex-1 text-left md:text-right\">\n                        <h4 className=\"font-semibold text-white\">{item.title}</h4>\n                        <p className=\"text-sm text-gray-400\">{item.desc}</p>\n                      </div>\n                      <div className=\"bg-purple-500/10 p-2 rounded-lg\">\n                        <item.icon className=\"w-5 h-5 text-purple-400\" />\n                      </div>\n                    </motion.div>\n                  ))}\n                </div>\n              </div>\n            </motion.div>\n\n            {/* Manufacturer Side */}\n            <motion.div\n              initial={{ opacity: 0, x: 50 }}\n              whileInView={{ opacity: 1, x: 0 }}\n              viewport={{ once: true }}\n              transition={{ duration: 0.8, ease: \"easeOut\" }}\n              className=\"relative\"\n            >\n              <div className=\"flex flex-col items-center md:items-start text-center md:text-left space-y-8\">\n                <div className=\"bg-gradient-to-br from-cyan-500/20 to-teal-500/20 p-4 rounded-2xl border border-cyan-500/30 mb-4\">\n                  <Factory className=\"w-12 h-12 text-cyan-400\" />\n                </div>\n                <h3 className=\"text-3xl font-bold text-white mb-2\">For Manufacturers</h3>\n                <p className=\"text-gray-400 mb-8 max-w-md\">\n                  Secure your supply chain and protect your brand reputation.\n                </p>\n\n                <div className=\"space-y-6 w-full max-w-md\">\n                  {[\n                    { title: \"Mint Digital Twin\", desc: \"Create an immutable NFT record for each medicine batch.\", icon: Database },\n                    { title: \"Generate Secure QR\", desc: \"Print unique QR codes linked to blockchain records.\", icon: QrCode },\n                    { title: \"Track Analytics\", desc: \"Monitor scans and detect potential counterfeit attempts.\", icon: BarChart3 },\n                  ].map((item, i) => (\n                    <motion.div \n                      key={i}\n                      initial={{ opacity: 0, x: 20 }}\n                      whileInView={{ opacity: 1, x: 0 }}\n                      viewport={{ once: true }}\n                      transition={{ delay: 0.2 + (i * 0.1) }}\n                      className=\"bg-slate-900/50 p-4 rounded-xl border border-cyan-500/10 hover:border-cyan-500/40 transition-colors flex items-center gap-4\"\n                    >\n                      <div className=\"bg-cyan-500/10 p-2 rounded-lg\">\n                        <item.icon className=\"w-5 h-5 text-cyan-400\" />\n                      </div>\n                      <div className=\"text-left\">\n                        <h4 className=\"font-semibold text-white\">{item.title}</h4>\n                        <p className=\"text-sm text-gray-400\">{item.desc}</p>\n                      </div>\n                    </motion.div>\n                  ))}\n                </div>\n              </div>\n            </motion.div>\n          </div>\n        </div>\n      </section>\n\n      {/* CTA Section */}\n      <section className=\"relative z-10 py-20 px-4\">\n        <motion.div\n          initial={{ opacity: 0, scale: 0.95 }}\n          whileInView={{ opacity: 1, scale: 1 }}\n          viewport={{ once: true }}\n          className=\"max-w-4xl mx-auto bg-gradient-to-r from-cyan-500/10 to-purple-500/10 backdrop-blur-xl border border-cyan-500/30 rounded-2xl p-12 text-center shadow-[0_0_40px_rgba(34,211,238,0.2)]\"\n        >\n          <h2 className=\"text-4xl font-bold mb-4 text-white\">\n            Ready to Protect Your Medicines?\n          </h2>\n          <p className=\"text-xl text-gray-300 mb-8\">\n            Join thousands of manufacturers and consumers fighting counterfeit medicines\n          </p>\n          <Button\n            onClick={handleGetStarted}\n            size=\"lg\"\n            className=\"bg-gradient-to-r from-cyan-500 to-purple-500 hover:from-cyan-600 hover:to-purple-600 text-white border-0 shadow-[0_0_30px_rgba(34,211,238,0.4)] hover:shadow-[0_0_40px_rgba(34,211,238,0.6)] transition-all duration-300 text-lg px-8 py-6\"\n          >\n            Get Started Now\n            <Zap className=\"ml-2 h-5 w-5\" />\n          </Button>\n        </motion.div>\n      </section>\n\n      {/* Footer */}\n      <footer className=\"relative z-10 border-t border-cyan-500/20 bg-slate-950/50 backdrop-blur-xl py-8 px-4\">\n        <div className=\"max-w-7xl mx-auto text-center text-gray-400\">\n          <p>&copy; 2024 Dhanvantari. Powered by Blockchain Technology.</p>\n        </div>\n      </footer>\n    </div>\n  );\n}\n'))
print(write_file_tool(file_path='src/pages/manufacturer/ManufacturerLayout.tsx', content='import { useAuth } from \"@/hooks/use-auth\";\nimport { cn } from \"@/lib/utils\";\nimport {\n  BarChart3,\n  Box,\n  FileText,\n  LayoutDashboard,\n  LogOut,\n  Menu,\n  PlusCircle,\n  Shield,\n  Wallet,\n  X,\n  QrCode\n} from \"lucide-react\";\nimport { useState } from \"react\";\nimport { Link, Outlet, useLocation, useNavigate } from \"react-router\";\nimport { Button } from \"@/components/ui/button\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport { useWeb3 } from \"@/hooks/use-web3\";\nimport { useEffect, Suspense } from \"react\";\nimport { PageLoader } from \"@/components/PageLoader\";\n\nexport default function ManufacturerLayout() {\n  const { isAuthenticated, isLoading, signOut, user } = useAuth();\n  const { account, connectWallet, disconnectWallet, isConnecting } = useWeb3();\n  const navigate = useNavigate();\n  const location = useLocation();\n  const [isSidebarOpen, setIsSidebarOpen] = useState(true);\n  const [isMobileMenuOpen, setIsMobileMenuOpen] = useState(false);\n\n  // Redirect if not authenticated\n  useEffect(() => {\n    if (!isLoading && !isAuthenticated) {\n      navigate(\"/auth\");\n    }\n  }, [isLoading, isAuthenticated, navigate]);\n\n  if (!isLoading && !isAuthenticated) {\n    return null;\n  }\n\n  const navItems = [\n    {\n      title: \"Dashboard\",\n      href: \"/manufacturer/dashboard\",\n      icon: LayoutDashboard,\n    },\n    {\n      title: \"My Medicines\",\n      href: \"/manufacturer/medicines\",\n      icon: Box,\n    },\n    {\n      title: \"Mint New Medicine\",\n      href: \"/manufacturer/create\",\n      icon: PlusCircle,\n    },\n    {\n      title: \"Generate QR\",\n      href: \"/manufacturer/generate-qr\",\n      icon: QrCode,\n    },\n    {\n      title: \"Reports\",\n      href: \"/manufacturer/reports\",\n      icon: FileText,\n    },\n  ];\n\n  const toggleSidebar = () => setIsSidebarOpen(!isSidebarOpen);\n\n  return (\n    <div className=\"min-h-screen bg-slate-950 text-white flex overflow-hidden\">\n      {/* Background Grid */}\n      <div className=\"fixed inset-0 bg-[linear-gradient(to_right,#4f4f4f2e_1px,transparent_1px),linear-gradient(to_bottom,#4f4f4f2e_1px,transparent_1px)] bg-[size:64px_64px] [mask-image:radial-gradient(ellipse_80%_50%_at_50%_0%,#000_70%,transparent_110%)] pointer-events-none z-0\" />\n\n      {/* Mobile Header */}\n      <div className=\"lg:hidden fixed top-0 left-0 right-0 h-16 bg-slate-900/80 backdrop-blur-md border-b border-cyan-500/20 z-50 flex items-center justify-between px-4\">\n        <div \n          className=\"flex items-center gap-2 cursor-pointer\"\n          onClick={() => navigate(\"/\")}\n        >\n          <img \n            src=\"https://harmless-tapir-303.convex.cloud/api/storage/c2ad483d-7d84-4cc6-8685-8946c6d6c394\" \n            alt=\"Logo\" \n            className=\"h-8 w-8 object-contain rounded-full p-0.5\" \n          />\n          <span className=\"font-bold text-lg bg-gradient-to-r from-cyan-400 to-purple-400 bg-clip-text text-transparent tracking-wide\">\n            Dhanvantari\n          </span>\n        </div>\n        <Button variant=\"ghost\" size=\"icon\" onClick={() => setIsMobileMenuOpen(!isMobileMenuOpen)}>\n          {isMobileMenuOpen ? <X className=\"h-6 w-6\" /> : <Menu className=\"h-6 w-6\" />}\n        </Button>\n      </div>\n\n      {/* Mobile Menu */}\n      <AnimatePresence>\n        {isMobileMenuOpen && (\n          <motion.div\n            initial={{ opacity: 0, y: -20 }}\n            animate={{ opacity: 1, y: 0 }}\n            exit={{ opacity: 0, y: -20 }}\n            className=\"lg:hidden fixed inset-0 top-16 z-40 bg-slate-950/95 backdrop-blur-xl p-4\"\n          >\n            <nav className=\"flex flex-col gap-2\">\n              {navItems.map((item) => (\n                <Link\n                  key={item.href}\n                  to={item.href}\n                  onClick={() => setIsMobileMenuOpen(false)}\n                  className={cn(\n                    \"flex items-center gap-3 px-4 py-3 rounded-lg transition-all duration-200\",\n                    location.pathname === item.href\n                      ? \"bg-cyan-500/10 text-cyan-400 border border-cyan-500/20\"\n                      : \"text-gray-400 hover:text-white hover:bg-white/5\"\n                  )}\n                >\n                  <item.icon className=\"h-5 w-5\" />\n                  {item.title}\n                </Link>\n              ))}\n              <Button\n                variant=\"ghost\"\n                className=\"justify-start px-4 py-3 text-red-400 hover:text-red-300 hover:bg-red-500/10 mt-4\"\n                onClick={() => signOut()}\n              >\n                <LogOut className=\"h-5 w-5 mr-3\" />\n                Sign Out\n              </Button>\n            </nav>\n          </motion.div>\n        )}\n      </AnimatePresence>\n\n      {/* Desktop Sidebar */}\n      <motion.aside\n        animate={{ width: isSidebarOpen ? 280 : 80 }}\n        className=\"hidden lg:flex flex-col border-r border-cyan-500/20 bg-slate-900/50 backdrop-blur-xl z-10 relative\"\n      >\n        <div className=\"h-16 flex items-center px-6 border-b border-cyan-500/20\">\n          <div \n            className=\"flex items-center gap-3 overflow-hidden whitespace-nowrap cursor-pointer\"\n            onClick={() => navigate(\"/\")}\n          >\n            <img \n              src=\"https://harmless-tapir-303.convex.cloud/api/storage/c2ad483d-7d84-4cc6-8685-8946c6d6c394\" \n              alt=\"Logo\" \n              className=\"h-8 w-8 shrink-0 object-contain rounded-full p-0.5\" \n            />\n            {isSidebarOpen && (\n              <motion.span\n                initial={{ opacity: 0 }}\n                animate={{ opacity: 1 }}\n                className=\"font-bold text-xl bg-gradient-to-r from-cyan-400 to-purple-400 bg-clip-text text-transparent tracking-wide\"\n              >\n                Dhanvantari\n              </motion.span>\n            )}\n          </div>\n        </div>\n\n        <div className=\"flex-1 py-6 px-3\">\n          <nav className=\"space-y-2\">\n            {navItems.map((item) => (\n              <Link\n                key={item.href}\n                to={item.href}\n                className={cn(\n                  \"flex items-center gap-3 px-3 py-3 rounded-lg transition-all duration-200 group relative overflow-hidden\",\n                  location.pathname === item.href\n                    ? \"bg-cyan-500/10 text-cyan-400 border border-cyan-500/20 shadow-[0_0_15px_rgba(34,211,238,0.1)]\"\n                    : \"text-gray-400 hover:text-white hover:bg-white/5\"\n                )}\n              >\n                <item.icon className={cn(\"h-5 w-5 shrink-0\", location.pathname === item.href && \"text-cyan-400\")} />\n                {isSidebarOpen && (\n                  <motion.span\n                    initial={{ opacity: 0 }}\n                    animate={{ opacity: 1 }}\n                    className=\"whitespace-nowrap\"\n                  >\n                    {item.title}\n                  </motion.span>\n                )}\n                {!isSidebarOpen && (\n                  <div className=\"absolute left-full ml-4 px-2 py-1 bg-slate-800 text-xs rounded opacity-0 group-hover:opacity-100 pointer-events-none whitespace-nowrap z-50 border border-cyan-500/20\">\n                    {item.title}\n                  </div>\n                )}\n              </Link>\n            ))}\n          </nav>\n        </div>\n\n        <div className=\"p-4 border-t border-cyan-500/20\">\n          {/* Wallet Connection */}\n          <div className=\"mb-4\">\n            {account ? (\n              <Button\n                variant=\"ghost\"\n                className={cn(\n                  \"w-full p-3 rounded-lg bg-cyan-500/10 border border-cyan-500/20 flex items-center gap-3 h-auto hover:bg-red-500/10 hover:border-red-500/20 hover:text-red-400 group transition-all\",\n                  !isSidebarOpen && \"justify-center p-2\"\n                )}\n                onClick={disconnectWallet}\n              >\n                <Wallet className=\"h-5 w-5 text-cyan-400 group-hover:text-red-400 shrink-0\" />\n                {isSidebarOpen && (\n                  <div className=\"overflow-hidden text-left\">\n                    <div className=\"text-xs text-cyan-400 group-hover:text-red-400 font-medium\">Connected</div>\n                    <div className=\"text-xs text-gray-400 group-hover:text-red-300 truncate\" title={account}>\n                      {account.slice(0, 6)}...{account.slice(-4)}\n                    </div>\n                  </div>\n                )}\n              </Button>\n            ) : (\n              <Button\n                variant=\"outline\"\n                className={cn(\n                  \"w-full border-cyan-500/50 text-cyan-400 hover:bg-cyan-500/10 hover:text-cyan-300\",\n                  !isSidebarOpen && \"px-0 justify-center\"\n                )}\n                onClick={connectWallet}\n                disabled={isConnecting}\n              >\n                <Wallet className={cn(\"h-5 w-5\", isSidebarOpen && \"mr-2\")} />\n                {isSidebarOpen && (isConnecting ? \"Connecting...\" : \"Connect Wallet\")}\n              </Button>\n            )}\n          </div>\n\n          <div className={cn(\"flex items-center gap-3 mb-4\", !isSidebarOpen && \"justify-center\")}>\n            <div className=\"h-10 w-10 rounded-full bg-gradient-to-br from-cyan-500 to-purple-500 flex items-center justify-center text-white font-bold shrink-0\">\n              {user?.name?.[0] || \"M\"}\n            </div>\n            {isSidebarOpen && (\n              <div className=\"overflow-hidden\">\n                <div className=\"font-medium text-sm truncate\">{user?.name || \"Manufacturer\"}</div>\n                <div className=\"text-xs text-gray-400 truncate\">{user?.email}</div>\n              </div>\n            )}\n          </div>\n          <Button\n            variant=\"ghost\"\n            className={cn(\n              \"w-full text-red-400 hover:text-red-300 hover:bg-red-500/10\",\n              !isSidebarOpen && \"px-0 justify-center\"\n            )}\n            onClick={() => signOut()}\n          >\n            <LogOut className={cn(\"h-5 w-5\", isSidebarOpen && \"mr-2\")} />\n            {isSidebarOpen && \"Sign Out\"}\n          </Button>\n        </div>\n\n        {/* Toggle Button */}\n        <button\n          onClick={toggleSidebar}\n          className=\"absolute -right-3 top-20 bg-slate-900 border border-cyan-500/20 rounded-full p-1 text-cyan-400 hover:text-white hover:bg-cyan-500/20 transition-colors\"\n        >\n          {isSidebarOpen ? <X className=\"h-4 w-4\" /> : <Menu className=\"h-4 w-4\" />}\n        </button>\n      </motion.aside>\n\n      {/* Main Content */}\n      <main className=\"flex-1 overflow-y-auto relative z-10 pt-16 lg:pt-0\">\n        <div className=\"max-w-7xl mx-auto p-6 lg:p-8 min-h-[calc(100vh-4rem)] lg:min-h-screen\">\n          <Suspense fallback={\n            <div className=\"h-full w-full flex items-center justify-center min-h-[50vh]\">\n              <PageLoader className=\"min-h-0 bg-transparent backdrop-blur-sm\" />\n            </div>\n          }>\n            <Outlet />\n          </Suspense>\n        </div>\n      </main>\n    </div>\n  );\n}\n'))
print(write_file_tool(file_path='src/pages/Auth.tsx', content='import { Suspense, lazy, useEffect, useState } from \"react\";\nimport { useNavigate, useSearchParams } from \"react-router-dom\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Label } from \"@/components/ui/label\";\nimport { Input } from \"@/components/ui/input\";\nimport { useAuth } from \"@/hooks/use-auth\";\nimport { z } from \"zod\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { Form, FormControl, FormField, FormItem, FormLabel, FormMessage } from \"@/components/ui/form\";\nimport { toast } from \"sonner\";\nimport { ReloadIcon } from \"@radix-ui/react-icons\";\nimport { ArrowRight, LogIn } from \"lucide-react\";\n\nconst AnimatedBackground = lazy(() => import(\"@/components/AnimatedBackground\").then(module => ({ default: module.AnimatedBackground })));\n\nconst emailSchema = z.object({\n  email: z.string().email(\"Invalid email address\"),\n});\n\nconst otpSchema = z.object({\n  code: z.string().min(6, \"OTP must be 6 digits\"),\n});\n\nexport default function Auth() {\n  const [searchParams] = useSearchParams();\n  const navigate = useNavigate();\n  const { signIn, isLoading, isAuthenticated, user } = useAuth();\n  const [isOtpSent, setIsOtpSent] = useState(false);\n  const [emailValue, setEmailValue] = useState(\"\");\n\n  const redirectPath = searchParams.get(\"redirect\") || \"/\";\n\n  useEffect(() => {\n    if (isAuthenticated) {\n      if (user?.role === \"manufacturer\") {\n        navigate(\"/manufacturer\");\n      } else {\n        navigate(redirectPath);\n      }\n    }\n  }, [isAuthenticated, navigate, redirectPath, user]);\n\n  const emailForm = useForm<z.infer<typeof emailSchema>>({\n    resolver: zodResolver(emailSchema),\n    defaultValues: {\n      email: \"\",\n    },\n  });\n\n  const otpForm = useForm<z.infer<typeof otpSchema>>({\n    resolver: zodResolver(otpSchema),\n    defaultValues: {\n      code: \"\",\n    },\n  });\n\n  const handleEmailSubmit = async (values: z.infer<typeof emailSchema>) => {\n    try {\n      setEmailValue(values.email);\n      await signIn(\"email\", { email: values.email });\n      setIsOtpSent(true);\n      toast.success(\"OTP sent to your email.\");\n    } catch (error: any) {\n      toast.error(error.message || \"Failed to send OTP.\");\n    }\n  };\n\n  const handleOtpSubmit = async (values: z.infer<typeof otpSchema>) => {\n    try {\n      await signIn(\"email-otp\", { email: emailValue, otp: values.code });\n      toast.success(\"Logged in successfully!\");\n      if (user?.role === \"manufacturer\") {\n        navigate(\"/manufacturer\");\n      } else {\n        navigate(redirectPath);\n      }\n    } catch (error: any) {\n      toast.error(error.message || \"Failed to verify OTP.\");\n    }\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-slate-950 text-white relative overflow-hidden\">\n        <Suspense fallback={<div></div>}>\n          <AnimatedBackground />\n        </Suspense>\n        <Card className=\"w-full max-w-md p-8 bg-slate-900/70 backdrop-blur-md border border-cyan-500/20 shadow-lg relative z-10\">\n          <CardHeader className=\"text-center\">\n            <CardTitle className=\"text-2xl font-bold bg-gradient-to-r from-cyan-400 to-purple-400 bg-clip-text text-transparent tracking-wide\">\n              Dhanvantari\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-center text-gray-400\">Loading authentication...</div>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen flex items-center justify-center bg-slate-950 text-white relative overflow-hidden\">\n      <Suspense fallback={<div></div>}>\n        <AnimatedBackground />\n      </Suspense>\n      <Card className=\"w-full max-w-md p-8 bg-slate-900/70 backdrop-blur-md border border-cyan-500/20 shadow-lg relative z-10\">\n        <CardHeader className=\"text-center\">\n          <CardTitle className=\"text-2xl font-bold bg-gradient-to-r from-cyan-400 to-purple-400 bg-clip-text text-transparent tracking-wide\">\n            Dhanvantari\n          </CardTitle>\n          <div className=\"text-sm text-gray-400 mt-2\">\n            {isOtpSent ? \"Enter OTP to continue\" : \"Sign in or create an account\"}\n          </div>\n        </CardHeader>\n        <CardContent>\n          {!isOtpSent ? (\n            <Form {...emailForm}>\n              <form onSubmit={emailForm.handleSubmit(handleEmailSubmit)} className=\"space-y-6\">\n                <FormField\n                  control={emailForm.control}\n                  name=\"email\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Email</FormLabel>\n                      <FormControl>\n                        <Input placeholder=\"your@email.com\" {...field} className=\"bg-slate-800 border-slate-700 text-white\" />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n                <Button type=\"submit\" className=\"w-full bg-gradient-to-r from-cyan-500 to-purple-500 hover:from-cyan-600 hover:to-purple-600 text-white border-0 shadow-[0_0_20px_rgba(34,211,238,0.3)]\" disabled={isLoading}>\n                  {isLoading ? (\n                    <ReloadIcon className=\"mr-2 h-4 w-4 animate-spin\" />\n                  ) : (\n                    <ArrowRight className=\"mr-2 h-4 w-4\" />\n                  )}\n                  Send OTP\n                </Button>\n              </form>\n            </Form>\n          ) : (\n            <Form {...otpForm}>\n              <form onSubmit={otpForm.handleSubmit(handleOtpSubmit)} className=\"space-y-6\">\n                <FormField\n                  control={otpForm.control}\n                  name=\"code\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>OTP Code</FormLabel>\n                      <FormControl>\n                        <Input placeholder=\"6-digit code\" {...field} className=\"bg-slate-800 border-slate-700 text-white\" />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n                <Button type=\"submit\" className=\"w-full bg-gradient-to-r from-cyan-500 to-purple-500 hover:from-cyan-600 hover:to-purple-600 text-white border-0 shadow-[0_0_20px_rgba(34,211,238,0.3)]\" disabled={isLoading}>\n                  {isLoading ? (\n                    <ReloadIcon className=\"mr-2 h-4 w-4 animate-spin\" />\n                  ) : (\n                    <LogIn className=\"mr-2 h-4 w-4\" />\n                  )}\n                  Verify OTP\n                </Button>\n                <Button\n                  type=\"button\"\n                  variant=\"link\"\n                  className=\"w-full text-gray-400 hover:text-white\"\n                  onClick={() => setIsOtpSent(false)}\n                >\n                  Back to Email\n                </Button>\n              </form>\n            </Form>\n          )}\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n'))
print(write_file_tool(file_path='src/pages/consumer/Dashboard.tsx', content='import { useAuth } from \"@/hooks/use-auth\";\nimport { Button } from \"@/components/ui/button\";\nimport { useNavigate } from \"react-router\";\nimport { useEffect } from \"react\";\n\nexport default function Dashboard() {\n  const { isAuthenticated, isLoading, user } = useAuth();\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    if (!isLoading && !isAuthenticated) {\n      navigate(\"/auth\");\n    }\n  }, [isLoading, isAuthenticated, navigate]);\n\n  if (isLoading) {\n    return <div className=\"text-white\">Loading...</div>;\n  }\n\n  return (\n    <div className=\"flex flex-col items-center justify-center min-h-screen bg-slate-950 text-white\">\n      <div className=\"fixed inset-0 bg-[linear-gradient(to_right,#4f4f4f2e_1px,transparent_1px),linear-gradient(to_bottom,#4f4f4f2e_1px,transparent_1px)] bg-[size:64px_64px] [mask-image:radial-gradient(ellipse_80%_50%_at_50%_0%,#000_70%,transparent_110%)] pointer-events-none z-0\" />\n      <div className=\"relative z-10 p-8 rounded-lg shadow-lg backdrop-blur-md bg-slate-900/70 border border-cyan-500/20 text-center\">\n        <h1 className=\"text-4xl font-bold bg-gradient-to-r from-cyan-400 to-purple-400 bg-clip-text text-transparent mb-4\">\n          Welcome, {user?.name || \"Consumer\"}!\n        </h1>\n        <p className=\"text-lg text-gray-300 mb-6\">\n          Your consumer dashboard is under construction. Stay tuned for updates!\n        </p>\n        <Button\n          onClick={() => navigate(\"/\")}\n          className=\"bg-gradient-to-r from-cyan-500 to-purple-500 hover:from-cyan-600 hover:to-purple-600 text-white border-0 shadow-[0_0_20px_rgba(34,211,238,0.3)] hover:shadow-[0_0_30px_rgba(34,211,238,0.5)] transition-all duration-300\"\n        >\n          Go to Landing Page\n        </Button>\n      </div>\n    </div>\n  );\n}\n'))
print(write_file_tool(file_path='src/pages/Verify.tsx', content='import { useEffect } from \"react\";\nimport { useSearchParams, useNavigate } from \"react-router-dom\";\nimport { useQuery } from \"convex/react\";\nimport { api } from \"@/convex/_generated/api\";\nimport { Id } from \"@/convex/_generated/dataModel\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { CheckCircle, XCircle, Loader2 } from \"lucide-react\";\nimport { toast } from \"sonner\";\nimport { useWeb3 } from \"@/hooks/use-web3\";\nimport { ethers } from \"ethers\";\n\nexport default function Verify() {\n  const [searchParams] = useSearchParams();\n  const navigate = useNavigate();\n  const medicineId = searchParams.get(\"medicineId\");\n\n  const medicine = useQuery(api.medicines.getMedicine, medicineId ? { id: medicineId as Id<\"medicines\"> } : \"skip\");\n  const scans = useQuery(api.scans.getScansForMedicine, medicineId ? { medicineId: medicineId as Id<\"medicines\"> } : \"skip\");\n\n  const { provider } = useWeb3();\n\n  const verifyMedicineOnChain = async (contractAddress: string, tokenId: number) => {\n    if (!provider) {\n      toast.error(\"MetaMask not connected. Cannot verify on chain.\");\n      return false;\n    }\n    try {\n      const contract = new ethers.Contract(\n        contractAddress,\n        [\"function ownerOf(uint256 tokenId) view returns (address)\"], // ERC-721 ABI snippet\n        provider\n      );\n      const owner = await contract.ownerOf(tokenId);\n      // In a real scenario, you\'d check if the owner is the expected manufacturer or a valid entity\n      console.log(\"NFT Owner:\", owner);\n      return true; // Placeholder for successful on-chain check\n    } catch (error) {\n      console.error(\"Error verifying medicine on chain:\", error);\n      toast.error(\"Failed to verify medicine on blockchain. Possible counterfeit.\");\n      return false;\n    }\n  };\n\n  useEffect(() => {\n    if (medicine && medicine.contractAddress && medicine.tokenId !== undefined) {\n      // Only attempt on-chain verification if contract details are available\n      verifyMedicineOnChain(medicine.contractAddress, medicine.tokenId);\n    }\n  }, [medicine, provider]);\n\n  let verificationStatus: 'loading' | 'authentic' | 'potential-counterfeit' | 'error' = 'loading';\n  let message: string = \"Verifying medicine authenticity...\";\n\n  if (medicine === undefined) {\n    verificationStatus = 'loading';\n  } else if (medicine === null) {\n    verificationStatus = 'error';\n    message = \"Medicine not found. Invalid QR code.\";\n  } else if (medicine) {\n    if (scans && scans.length > 5) { // Arbitrary threshold for suspicious activity\n      verificationStatus = 'potential-counterfeit';\n      message = \"This medicine has been scanned an unusually high number of times, suggesting a potential counterfeit. Proceed with caution.\";\n    } else {\n      verificationStatus = 'authentic';\n      message = \"This medicine is authentic and registered on the blockchain.\";\n    }\n  }\n\n  const getStatusIcon = () => {\n    switch (verificationStatus) {\n      case 'loading': return <Loader2 className=\"h-12 w-12 text-blue-500 animate-spin\" />;\n      case 'authentic': return <CheckCircle className=\"h-12 w-12 text-green-500\" />;\n      case 'potential-counterfeit': return <XCircle className=\"h-12 w-12 text-orange-500\" />;\n      case 'error': return <XCircle className=\"h-12 w-12 text-red-500\" />;\n    }\n  };\n\n  const getStatusColorClass = () => {\n    switch (verificationStatus) {\n      case 'authentic': return \"border-green-500/20 shadow-[0_0_30px_rgba(34,211,238,0.4)]\";\n      case 'potential-counterfeit': return \"border-orange-500/20 shadow-[0_0_30px_rgba(251,146,60,0.4)]\";\n      case 'error': return \"border-red-500/20 shadow-[0_0_30px_rgba(239,68,68,0.4)]\";\n      default: return \"border-cyan-500/20 shadow-[0_0_30px_rgba(34,211,238,0.4)]\";\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen flex items-center justify-center bg-slate-950 text-white relative overflow-hidden\">\n      <div className=\"fixed inset-0 bg-[linear-gradient(to_right,#4f4f4f2e_1px,transparent_1px),linear-gradient(to_bottom,#4f4f4f2e_1px,transparent_1px)] bg-[size:64px_64px] [mask-image:radial-gradient(ellipse_80%_50%_at_50%_0%,#000_70%,transparent_110%)] pointer-events-none z-0\" />\n      \n      <Card className={`w-full max-w-md p-8 bg-slate-900/70 backdrop-blur-md relative z-10 text-center ${getStatusColorClass()}`}>\n        <CardHeader className=\"flex flex-col items-center justify-center space-y-4\">\n          <CardTitle className=\"text-3xl font-bold bg-gradient-to-r from-cyan-400 to-purple-400 bg-clip-text text-transparent tracking-wider\">\n            Dhanvantari Verification\n          </CardTitle>\n          <div className=\"p-4 rounded-full bg-slate-800/50\">\n            {getStatusIcon()}\n          </div>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          <p className=\"text-lg text-gray-300\">{message}</p>\n          {medicine && (\n            <div className=\"text-left space-y-2 text-gray-400\">\n              <p><strong>Medicine Name:</strong> {medicine.name}</p>\n              <p><strong>Batch Number:</strong> {medicine.batchNumber}</p>\n              <p><strong>Manufacturer:</strong> {medicine.manufacturerName}</p>\n              <p><strong>Minted On:</strong> {new Date(medicine._creationTime).toLocaleDateString()}</p>\n            </div>\n          )}\n          <Button\n            onClick={() => navigate(\"/\")}\n            className=\"w-full bg-gradient-to-r from-cyan-500 to-purple-500 hover:from-cyan-600 hover:to-purple-600 text-white border-0 shadow-[0_0_20px_rgba(34,211,238,0.3)] hover:shadow-[0_0_30px_rgba(34,211,238,0.5)] transition-all duration-300 mt-6\"\n          >\n            Back to Home\n          </Button>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n'))